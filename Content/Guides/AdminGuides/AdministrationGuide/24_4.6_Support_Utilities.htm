<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="mp-topic" style="mc-master-page: url('..\..\..\Resources\MasterPages\Guides.flmsp');">
    <head>
    </head>
    <body>
        <h3 id="_support_utilities">Support Utilities</h3>
        <div class="sect3">
            <h4 id="_report_collection">Report Collection</h4>
            <div class="paragraph">
                <p>This support utility is used to collect logs and/or the leveldb at a client’s site. The generated tar file can then be sent to the SQream support team for further investigation.</p>
            </div>
            <div class="ulist">
                <ul>
                    <li>
                        <p>Output file format: report_[date]_[time].tar</p>
                    </li>
                </ul>
            </div>
            <div class="paragraph">
                <p>Can run as a utility function or executable, allowing to collect information also if the SQream server is not running.
Supported collection modes:</p>
            </div>
            <div class="ulist">
                <ul>
                    <li>
                        <p>log = only log files are collected</p>
                    </li>
                    <li>
                        <p>db = only leveldb</p>
                    </li>
                    <li>
                        <p>db_and_log = both log files and leveldb are collected</p>
                    </li>
                </ul>
            </div>
            <div class="code">
                <div class="title">Syntax and example when running as a utility function:</div>
                <div class="content"><pre class="pygments highlight" xml:space="preserve"><code data-lang="sqream db"><span class="tok-k">SELECT</span>  <span class="tok-n">report_collection</span><span class="tok-p">(</span><span class="tok-s1">'&lt;/pathToOutputFolder&gt;'</span><span class="tok-p">,</span>  <span class="tok-s1">'&lt;mode&gt;'</span><span class="tok-p">);</span>  

<span class="tok-k">SELECT</span>  <span class="tok-n">report_collection</span><span class="tok-p">(</span><span class="tok-s1">'/home/sqream/log_collection'</span><span class="tok-p">,</span><span class="tok-s1">'log'</span><span class="tok-p">);</span>  <span class="tok-p">)</span></code></pre>
                </div>
            </div>
            <div class="code">
                <div class="title">Syntax and example for executable. The executable works only when no SQream instance is running:</div>
                <div class="content"><pre class="pygments highlight" xml:space="preserve"><code data-lang="bash">./bin/report_collection &lt;pathToSqreamDb&gt; &lt;/pathToOutputFolder&gt; &lt;mode&gt;./bin/report_collection /home/sqream/sqream_storage/ /home/sqream/log_collection log</code></pre>
                </div>
            </div>
        </div>
        <div class="sect3">
            <h4 id="_export_reproducible_sample_data">Export Reproducible Sample Data</h4>
            <div class="paragraph">
                <p>This support utility is used to collect data in order to reproduce a problematic query in a support lab (not only onsite at customer’s site). Typically used for query issues that are data related.
It runs a query, collects the data and stores the data in a small SQream DB (compressed into a single tar file). This file together with the query can be used in a remote system (support lab) to recreate and investigate the issue.</p>
            </div>
            <div class="paragraph">
                <p>The output folder contains both the final tar file and data before its compression. It is sufficient to send the tar file.
Works as utility function. No executable.</p>
            </div>
            <div class="code">
                <div class="title">Syntax and example:</div>
                <div class="content"><pre class="pygments highlight" xml:space="preserve"><code data-lang="sqream db"><span class="tok-k">select</span>  <span class="tok-n">export_reproducible_sample</span><span class="tok-p">(</span><span class="tok-s1">'&lt;/pathToOutputFolder&gt;'</span><span class="tok-p">,</span>  <span class="tok-s1">'sql query1'</span><span class="tok-p">,</span>  <span class="tok-s1">'sql query 2'</span><span class="tok-p">,</span>  <span class="tok-mf">..</span><span class="tok-p">);</span>  

<span class="tok-k">select</span>  <span class="tok-n">export_reproducible_sample</span><span class="tok-p">(</span><span class="tok-s1">'home/sqream/data_collection'</span><span class="tok-p">,</span>  <span class="tok-s1">'select * from t'</span><span class="tok-p">);</span></code></pre>
                </div>
            </div>
        </div>
    </body>
</html>