<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="mp-topic" style="mc-master-page: url('..\..\..\Resources\MasterPages\Guides.flmsp');">
    <head>
        <link href="../../../Resources/Table Styles/DefaultTable.css" rel="stylesheet" MadCap:stylesheetType="table" />
    </head>
    <body>
        <h3><a name="top"></a>Logs</h3>
        <p>Each SQream instance generates its own set of log files based on the log rotation policy (see <a href="#Log">Log rotation policy</a>). The files will be located in a dedicated folder (folder name contains IP and port). </p>
        <p>For example: <span class="emphasis">/home/sqream/sqream_storage/sqreamdb/logs/</span><span class="strong">127.0.0.1_5000</span>.</p>
        <div class="tip">
            <p>SQream recommends storing the log files in the shared storage&#160; so they can be all analyzed in a single tool (e.g: SQream external table, Kibana etc.). </p>
        </div>
        <p>To generate an external table over the log files, use the command: </p>
        <div class="code">
            <p>create or replace external table t</p>
            <p>(&#160; start_message varchar(4), </p>
            <p>&#160;&#160;&#160; row_id bigint, </p>
            <p>&#160;&#160;&#160; timestamp datetime, </p>
            <p>&#160;&#160;&#160; message_level nvarchar(6),<br />&#160;&#160;&#160; thread_id nvarchar(40), </p>
            <p>&#160;&#160;&#160; ip nvarchar(15), </p>
            <p>&#160;&#160;&#160; port int, </p>
            <p>&#160;&#160;&#160; connection_id int,<br />&#160;&#160;&#160; db_name nvarchar(128), </p>
            <p>&#160;&#160;&#160; user_name nvarchar(128), </p>
            <p>&#160;&#160;&#160; statement_id int,</p>
            <p>&#160;</p>
            <p>&#160;&#160;&#160; service_name nvarchar(128), </p>
            <p>&#160;&#160;&#160; message_type_id int, </p>
            <p>&#160;&#160;&#160; message nvarchar(10000),<br />&#160;&#160;&#160; end_message varchar(5))</p>
            <p>using format csv with path</p>
            <p>'/home/sqream/sqream_storage/sqreamdb/logs/*.log' field delimiter '|');</p>
        </div>
        <h4>Log file format: </h4>
        <p>Delimited text format with the following column list: </p>
        <ul>
            <li>Row Id</li>
            <li>Timestamp</li>
            <li>Message Level</li>
            <li>Thread id</li>
            <li>IP</li>
            <li>Port</li>
            <li>Connection Id</li>
            <li>DB name</li>
            <li>User Id</li>
            <li>Statement Id</li>
            <li>Service name</li>
            <li>Message type id</li>
            <li>Message</li>
        </ul>
        <p class="tableHeader">Message type/contents:&#160;</p>
        <table style="mc-table-style: url('../../../Resources/Table Styles/DefaultTable.css');" class="TableStyle-DefaultTable" cellspacing="0">
            <thead>
                <tr class="TableStyle-DefaultTable-Head-Header1">
                    <th class="TableStyle-DefaultTable-HeadE-Column1-Header1">
                        <p>Message Type Code</p>
                    </th>
                    <th class="TableStyle-DefaultTable-HeadE-Column1-Header1">
                        <p>Message Type</p>
                    </th>
                    <th class="TableStyle-DefaultTable-HeadE-Column1-Header1">
                        <p>Message Content</p>
                    </th>
                    <th class="TableStyle-DefaultTable-HeadD-Column1-Header1">
                        <p>Log level</p>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-DefaultTable-Body-Body1">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>1</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>Statement started</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>Statement</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body1">
                        <p>Info</p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body2">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>2</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>Statement reconstruct</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>Statement</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body2">
                        <p>Info</p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body1">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>4</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>Statement execution</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>"Executing"</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body1">
                        <p>Info</p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body2">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>10</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>Statement ended</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>"Success" / "Failed"</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body2">
                        <p>Info</p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body1">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>20</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>Compilation error</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>Error text</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body1">
                        <p>Info</p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body2">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>21</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>Execution error</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>Error text</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body2">
                        <p>Info</p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body1">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>30</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>Size</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>#MB</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body1">
                        <p>Info</p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body2">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>31</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>Result Set Rows</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>#records</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body2">
                        <p>Info</p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body1">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>32</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>Processed Rows</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>#records</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body1">
                        <p>Info</p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body2">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>100</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>Session started</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>Client IP address</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body2">
                        <p>Info</p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body1">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>101</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>Login</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>"Success" / "Failed"</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body1">
                        <p>Info</p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body2">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>110</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>Session ended</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>"Session ended"</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body2">
                        <p>Info</p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body1">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>200</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>Node info</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>Node info lines</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body1">
                        <p>Info</p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body2">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>500</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>Exception</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>Exception data</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body2">
                        <p>Error</p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body1">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>1000</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>Server startup</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>"Server startup"</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body1">
                        <p>System</p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body2">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>1002</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>Metadata</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>Metadata server location</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body2">
                        <p>System</p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body1">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>1003</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>Configuration</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>Configuration flags</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body1">
                        <p>System</p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body2">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>1004</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>STORAGE VERSION</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>storage version number</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body2">
                        <p>System</p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body1">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>1010</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>Server Error</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>Error message</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body1">
                        <p>fatal</p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body2">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>1090</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>Set config</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>Successful set config &lt;flag_name&gt; to value: &lt;value&gt;</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body2">
                        <p>info</p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body1">
                    <td class="TableStyle-DefaultTable-BodyB-Column1-Body1">
                        <p>1100</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyB-Column1-Body1">
                        <p>Server shutdown</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyB-Column1-Body1">
                        <p>Server shutdown</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyA-Column1-Body1">
                        <p>System</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h4><a name="Log"></a>Log rotation policy</h4>
        <table style="mc-table-style: url('../../../Resources/Table Styles/DefaultTable.css');" class="TableStyle-DefaultTable" cellspacing="0">
            <thead>
                <tr class="TableStyle-DefaultTable-Head-Header1">
                    <th class="TableStyle-DefaultTable-HeadE-Column1-Header1">
                        <p>Parameter </p>
                    </th>
                    <th class="TableStyle-DefaultTable-HeadE-Column1-Header1">
                        <p>Description</p>
                    </th>
                    <th class="TableStyle-DefaultTable-HeadE-Column1-Header1">
                        <p>Possible Values </p>
                    </th>
                    <th class="TableStyle-DefaultTable-HeadE-Column1-Header1">
                        <p>Default Value </p>
                    </th>
                    <th class="TableStyle-DefaultTable-HeadD-Column1-Header1">
                        <p>Comment </p>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-DefaultTable-Body-Body1">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1"><span class="strong">useLogMaxFileSize</span>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>Apply rotation based on log file size limit</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>TRUE / FALSE</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>FALSE</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body1">
                        <p>When set to ‘TRUE’ <span class="strong">logRotateSizeMB</span> configuration parameter is enabled. </p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body2">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2"><span class="strong">logMaxFileSizeMB</span>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>Log file size in MB. </p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>Integer between 1-1024</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body2">
                        <p>20</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body2">
                        <p>&#160;</p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body1">
                    <td class="TableStyle-DefaultTable-BodyB-Column1-Body1"><span class="strong">logFileRotateTimeFrequency</span>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyB-Column1-Body1">
                        <p>Frequency of log rotation</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyB-Column1-Body1">
                        <p>Daily | Weekly |&#160; Monthly | Never</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyB-Column1-Body1">
                        <p>Never</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyA-Column1-Body1">
                        <p>Not case sensitive</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h4>Log Levels</h4>
        <table style="mc-table-style: url('../../../Resources/Table Styles/DefaultTable.css');" class="TableStyle-DefaultTable" cellspacing="0">
            <p class="tableheading">Message type/contents:</p>
            <thead>
                <tr class="TableStyle-DefaultTable-Head-Header1">
                    <th class="TableStyle-DefaultTable-HeadE-Column1-Header1">
                        <p>Parameter </p>
                    </th>
                    <th class="TableStyle-DefaultTable-HeadE-Column1-Header1">
                        <p>Description</p>
                    </th>
                    <th class="TableStyle-DefaultTable-HeadE-Column1-Header1">
                        <p>Possible Values </p>
                    </th>
                    <th class="TableStyle-DefaultTable-HeadD-Column1-Header1">
                        <p>Default Value </p>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-DefaultTable-Body-Body1">
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1"><span class="strong">logClientLevel</span>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>Log level </p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyE-Column1-Body1">
                        <p>0 SYSTEM |</p>
                        <p>1 FATAL&#160;&#160;&#160; |</p>
                        <p>2 ERROR&#160;&#160; |</p>
                        <p>3 WARNING |</p>
                        <p>4 INFO&#160;&#160;&#160;&#160; </p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyD-Column1-Body1">
                        <p>4 (INFO)</p>
                    </td>
                </tr>
                <tr class="TableStyle-DefaultTable-Body-Body2">
                    <td class="TableStyle-DefaultTable-BodyB-Column1-Body2"><span class="strong">nodeInfoLoggingSec</span>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyB-Column1-Body2">
                        <p>Theshold for writing from execution log to the instance log </p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyB-Column1-Body2">
                        <p>Number to represent seconds</p>
                    </td>
                    <td class="TableStyle-DefaultTable-BodyA-Column1-Body2">
                        <p>60 </p>
                    </td>
                </tr>
            </tbody>
        </table>
    </body>
</html>