<?xml version="1.0" encoding="utf-8"?>
<html lang="en" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="mp-topic">
    <head>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    </head>
    <body class="article toc2 toc-left">
        <h2 id="_os_settings">OS settings</h2>
        <div class="sectionbody">
            <div class="ulist checklist">
                <ul class="checklist">
                    <li>
                        <p><i class="fa fa-square-o"></i> Set number of open files to 500,000:<br></br></p>
                    </li>
                </ul>
            </div>
            <div class="code">
                <div class="content"><pre xml:space="preserve">echo -e "*      	soft 	nproc      	500000\n*      	hard 	nproc   	500000\n*      	soft 	nofile     	500000\n*      	hard 	nofile     	500000"  &gt;&gt; /etc/security/limits.conf</pre>
                </div>
            </div>
            <div class="ulist checklist">
                <ul class="checklist">
                    <li>
                        <p><i class="fa fa-square-o"></i> Tune kernel by adding lines to <code>/etc/sysctl.conf</code>:<br></br></p>
                    </li>
                </ul>
            </div>
            <div class="code">
                <div class="content"><pre xml:space="preserve">echo -e " fs.file-max=2097152\n vm.dirty_background_ratio = 5 \n vm.dirty_ratio = 10 \n vm.swappiness = 10 \n vm.zone_reclaim_mode = 7 \n vm.vfs_cache_pressure = 200 \n"  &gt;&gt; /etc/sysctl.conf</pre>
                </div>
            </div>
            <div class="ulist checklist">
                <ul class="checklist">
                    <li>
                        <p><i class="fa fa-square-o"></i> Disable transparent hugepages<br></br></p>
                    </li>
                </ul>
            </div>
            <div class="code">
                <div class="content"><pre xml:space="preserve">echo 'never' &gt; /sys/kernel/mm/transparent_hugepage/enabled</pre>
                </div>
            </div>
            <div class="ulist checklist">
                <ul class="checklist">
                    <li>
                        <p><i class="fa fa-square-o"></i> Tune NVIDIA Tesla series cards by placing the following lines in <code>/etc/rc.local</code>:</p>
                    </li>
                </ul>
            </div>
            <div class="code">
                <div class="content"><pre xml:space="preserve">nvidia-persistenced
nvidia-smi -pm 1
nvidia-smi -acp 0
nvidia-smi --auto-boost-permission=0
nvidia-smi --auto-boost-default=0
# Assuming all GPUs are of the same type
nvidia-smi -ac $(SC=`nvidia-smi --query-supported-clocks=mem,gr --format=csv,noheader | head -n1`; echo $SC | awk 'BEGIN { FS=" " } ; { print $1 "," $3 }')</pre>
                </div>
            </div>
        </div>
    </body>
</html>